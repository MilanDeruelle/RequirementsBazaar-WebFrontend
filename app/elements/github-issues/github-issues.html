<link rel="import" href="../../components/polymer/polymer.html">

<dom-module id="github-issues">
    <template>
        <style is="custom-style">

        </style>

        <iron-ajax
            id="getGithubRepos"
            handle-as="json"
            url="https://api.github.com/user/repos"
            params='{"access_token": ""}'
            content-type="application/json"
            method="GET"
            last-response="{{repositories}}"
            on-error="errorHandler"></iron-ajax>

        <iron-ajax
            id="postIssueGit"
            handle-as="json"
            content-type="application/json"
            params='{"access_token": ""}'
            method="POST"
            on-response="handleResponseGithubIssue"
            on-error="errorHandler"></iron-ajax>

        <iron-ajax
            id="getSearchGit"
            handle-as="json"
            content-type="application/json"
            method="GET"
            last-response="{{searchRepositories}}"
            on-response="showRepoSearchResults"
            on-error="errorHandler"></iron-ajax>


        <paper-dialog id="reposContainer" on-iron-overlay-closed="onRepoDialogClosed">
            <h2>Your Github Repositories</h2>
            <paper-dialog-scrollable>
                <paper-input id="searchGithubRepo" label="Search a Github Repository" on-keydown="searchGithubRepo">
                    <iron-icon icon="search" prefix></iron-icon>
                </paper-input>
                <iron-selector id="selRepo" selected="0">
                    <template is="dom-repeat" items$="{{repositories}}" id="repoElements">
                        <paper-item>
                            <paper-item-body two-line>
                                <div>{{item.name}}</div>
                                <div secondary>{{item.description}}</div>
                            </paper-item-body>
                        </paper-item>
                    </template>
                </iron-selector>
            </paper-dialog-scrollable>
            <div class="buttons">
                <paper-button dialog-dismiss>Cancel</paper-button>
                <paper-button dialog-confirm autofocus>POST</paper-button>
            </div>
        </paper-dialog>


    </template>

    <script>
        (function () {

            Polymer({
                is: 'github-issues',
                properties: {
                    repositories: Object,
                    access_token: String
                }

            });
        })
        ();
    </script>

</dom-module>