<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="req-user">
    <template>
        <style is="custom-style">

            paper-tooltip.custom img {
                float: left;
            }
            .custom {
                --paper-tooltip-background: white;
                --paper-tooltip-text-color: black;
                --paper-tooltip-opacity: 1;
                width: 250px;
            }

            .profileImage {
                width: 40px;
                height: 40px;
                border-radius: 50%; /*don't forget prefixes*/
                background-position: center center;
                /* as mentioned by Vad: */
                background-size: cover;
                margin-right: 10px;
            }

            .name {
                font-size: 18px;
                font-family: 'Palatino Linotype', 'Book Antiqua', Palatino, FreeSerif, serif;
                font-weight: 400;
            }

            .username {
                font-size: 12px;
                font-style: italic;
                padding-top: 5px;
            }

        </style>

        <iron-ajax
                auto
                url="{{usersUrl}}"
                last-response="{{user}}"></iron-ajax>

        <template is="dom-if" if="{{!fullView}}">

            <span id="user">{{user.userName}}</span>

            <paper-tooltip for="user" class="custom" animation-delay="0">
                <img src="{{user.profileImage}}" class="profileImage">
                <div class="name">
                    <span>{{user.firstName}}</span>
                    <span>{{user.lastName}}</span>
                </div>
                <div class="username">{{user.userName}}</div>
            </paper-tooltip>

        </template>

        <template is="dom-if" if="{{fullView}}">

            <paper-item>
                <img src="{{user.profileImage}}" class="profileImage">
                <paper-item-body two-line>
                    <div class="name">
                        <span>{{user.firstName}}</span>
                        <span>{{user.lastName}}</span>
                    </div>
                    <div secondary>{{user.userName}}</div>
                </paper-item-body>
            </paper-item>

        </template>

    </template>

    <script>
        (function () {
            'use strict';

            Polymer({
                is: 'req-user',
                properties: {
                    userId: {
                        type: Number
                    },
                    user:{
                        type: Object,
                        notify: true
                    },
                    usersUrl: {
                        type: String,
                        computed: 'computeUsersUrl(userId)'
                    },
                    fullView: {
                        type: Boolean,
                        value: false
                    }
                },

                computeUsersUrl: function(userId){
                    return "https://requirements-bazaar.org/bazaar/users/" + userId;
                }

            });
        })
        ();
    </script>

</dom-module>
