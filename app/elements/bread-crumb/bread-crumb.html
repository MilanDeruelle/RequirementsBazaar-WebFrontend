<link rel="import" href="../../bower_components/polymer/polymer.html">

<dom-module id="bread-crumb">
    <template>
        <style is="custom-style">
            :host {
                display: block;
            }
        </style>

        <iron-ajax
                id="projectLoader"
                url="{{baseHref}}/projects/[[projectId]]"
                last-response="{{project}}"></iron-ajax>

        <iron-ajax
                id="componentLoader"
                url="{{baseHref}}/components/[[componentId]]"
                last-response="{{component}}"></iron-ajax>


        <span><a href="{{baseUrl}}projects">Projects</a></span>
        <template is="dom-if" if$="[[project]]">
            <span> > <a href$="{{baseUrl}}projects/[[project.id]]">[[project.name]]</a></span>
        </template>
        <template is="dom-if" if$="[[component]]">
            <span> > <a href$="{{baseUrl}}projects/[[project.id]]/components/[[component.id]]">[[component.name]]</a></span>
        </template>

    </template>

    <script>
        (function () {
//            'use strict';

            Polymer({
                is: 'bread-crumb',
                properties: {
                    project: {
                        type: Object
                    },
                    component: {
                        type: Object
                    },
                    projectId: {
                        type: String,
                        observer: '_getProject'
                    },
                    componentId: {
                        type: String,
                        observer: '_getComponent'
                    },
                    baseUrl: {
                        type: String
                    },
                    baseHref: {
                        type: String
                    }
                },

                _getProject: function(){
                    if (this.projectId !== null){
                        this.$.projectLoader.generateRequest();
                    }
                },

                _getComponent: function(){
                    if (this.componentId !== null){
                        this.$.componentLoader.generateRequest();
                    }
                }

            });
        })
        ();
    </script>

</dom-module>